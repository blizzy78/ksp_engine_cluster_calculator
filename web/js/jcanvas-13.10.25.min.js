/**
 * jCanvas v13.10.25
 * Copyright 2013 Caleb Evans
 * Released under the MIT license
 */(function(e,t,n,r,i,s,o,u,a){function On(e){var t=this;hn(t,e);return t}function Mn(e){e?hn(On.prototype,e):Mn.prefs=On.prototype=hn({},cn);return this}function _n(e){return dn(e)==="string"}function Dn(e){return e&&e[A]?e[A]("2d"):u}function Pn(e){e=hn({},e);e.masks=e.masks[Z](0);return e}function Hn(e,t){var n;e.save();n=Pn(t[p]);t[O].push(n)}function Bn(e,t){if(t[O][f]===0)t[p]=Pn(kn);else{e[kt]();t[p]=t[O].pop()}}function jn(e,t,n){vn(n[b])?t[b]=n[b][C](e,n):t[b]=n[b];vn(n[x])?t[x]=n[x][C](e,n):t[x]=n[x];t.lineWidth=n[bt];if(n.rounded)t.lineCap=t.lineJoin="round";else{t.lineCap=n.strokeCap;t.lineJoin=n.strokeJoin;t.miterLimit=n.miterLimit}t.shadowOffsetX=n.shadowX;t.shadowOffsetY=n.shadowY;t[Nt]=n[Nt];t[v]=n[v];t.globalAlpha=n.opacity;t.globalCompositeOperation=n.compositing;n[Ft]&&(t.webkitImageSmoothingEnabled=t.mozImageSmoothingEnabled=n[Ft])}function Fn(e,t,n){if(n.mask){n[gt]&&Hn(e,t);e.clip();t[p].masks.push(n._args)}}function In(e,t){t._transformed&&e[kt]()}function qn(e,t,n){var r;n[pt]&&t[z]();if(n.shadowStroke&&n[bt]!==0){t.stroke();t.fill();t[v]=h;t[Nt]=0;t.stroke()}else{t.fill();n[b]!==h&&(t[v]=h);n[bt]!==0&&t.stroke()}n[pt]||t[z]();In(t,n);if(n.mask){r=Xn(e);Fn(t,r,n)}}function Rn(e,t,n){t[H]=t[At]?gn/180:1;e[E](t.x,t.y);e[ct](t[ct]*t[H]);e[E](-t.x,-t.y);n&&(n[ct]+=t[ct]*t[H])}function Un(e,t,n){t.scale!==1&&(t[ht]=t[lt]=t.scale);e[E](t.x,t.y);e.scale(t[ht],t[lt]);e[E](-t.x,-t.y);if(n){n[ht]*=t[ht];n[lt]*=t[lt]}}function zn(e,t,n){t[E]&&(t[j]=t[F]=t[E]);e[E](t[j],t[F]);if(n){n[j]+=t[j];n[F]+=t[F]}}function Wn(e,t,n,r,i){n[H]=n[At]?gn/180:1;n._transformed=s;t.save();i===a&&(i=r);if(!n.fromCenter&&!n._centered){n.x+=r/2;n.y+=i/2;n._centered=s}n[ct]&&Rn(t,n,{});(n.scale!==1||n[ht]!==1||n[lt]!==1)&&Un(t,n,{});(n[E]||n[j]||n[F])&&zn(t,n,{})}function Xn(t){var n;if(Tn._canvas===t&&Tn._data)n=Tn._data;else{n=e.data(t,at);if(!n){n={canvas:t,layers:[],layer:{names:{},groups:{}},intersecting:[],lastIntersected:u,cursor:e(t).css(mt),drag:{},event:{type:u,x:u,y:u},events:{},transforms:Pn(kn),savedTransforms:[],animating:o,animated:u,pos:0,pixelRatio:1,scaled:!1};e.data(t,at,n)}Tn._canvas=t;Tn._data=n}return n}function Vn(e,t,n){var r;for(r in Mn[B])Mn[B][tn](r)&&(n[r]||n[wt]&&n[wt][r])&&$n(e,t,n,r)}function $n(e,t,n,r){r=ar(r);Mn[B][r](e,t);n[S]=s}function Jn(e,t,n){var r,i,o;if(n[xt]||n[mt]||n[wt]){r=[W,D,st];for(o=0;o<r[f];o+=1){i=r[o];$n(e,t,n,i)}if(!t[B].mouseoutdrag){e.bind("mouseout.jCanvas",function(){var n=t[on][k];if(n){t[on]={};n.dragcancel&&n.dragcancel[C](e[0],n);e[P]()}});t[B].mouseoutdrag=s}n[S]=s}}function Kn(e,t,n,r){var i=t[k].names;r?r[X]!==a&&_n(n[X])&&n[X]!==r[X]&&delete i[n[X]]:r=n;_n(r[X])&&(i[r[X]]=n)}function Qn(e,t,n,r){var i=t[k][d],s,o,l,c,h;if(n[Kt]!==u){n[d]=[n[Kt]];n[_t]&&(n[dt]=[n[Kt]])}if(r&&r[Kt]!==a)if(r[Kt]===u)r[d]=u;else{r[d]=[r[Kt]];r[_t]&&(r[dt]=[r[Kt]])}if(!r)r=n;else if(r[d]!==a&&n[d]!==u)for(l=0;l<n[d][f];l+=1){o=n[d][l];s=i[o];if(s){for(h=0;h<s[f];h+=1)if(s[h]===n){c=h;s[m](h,1);break}s[f]===0&&delete i[o]}}if(r[d]!==a&&r[d]!==u)for(l=0;l<r[d][f];l+=1){o=r[d][l];s=i[o];if(!s){s=i[o]=[];s[X]=o}c===a&&(c=s[f]);s[m](c,0,n)}}function Gn(e){var t,n,r;t={};for(n=e[Q][f]-1;n>=0;n-=1){t=e[Q][n];if(t[Xt]){for(r=t[Xt][f]-1;r>=0;r-=1)if(!t[Xt][r][V]){t[V]=o;break}if(t[V])break}}return t}function Yn(e,t,n,r){if(n&&n[w]&&n[$]){r?n._next=r:n._next=u;n[$][C](e,n)}}function Zn(e,t,n){var r,i,u,a,l,c,h,p;a=t[on];i=a[k];l=i[dt]||[];r=t[Jt];if(n===D||n===vt){if(!a[Mt]){a[Mt]=s;if(i.bringToFront){r[m](i[_],1);i[_]=r.push(i)}for(p=0;p<l[f];p+=1){h=l[p];c=t[k][d][h];if(i[d]&&c)for(u=0;u<c[f];u+=1)if(c[u]!==i){c[u][Lt]=c[u].x;c[u][Ot]=c[u].y;c[u]._endX=i[nt];c[u]._endY=i[rt];if(c[u].bringToFront){c[u][_]=pn(c[u],r);r[m](c[u][_],1);r[m](-1,0,c[u]);c[u][_]=r[f]-2}c[u][Ht]&&i[q]&&c[u][Ht][C](e[0],c[u])}}a[Lt]=i[Lt]=i.x;a[Ot]=i[Ot]=i.y;a._endX=i._endX=i[nt];a._endY=i._endY=i[rt];er(e,i,Ht)}i.x=i[nt]-(a._endX-a[Lt]);i.y=i[rt]-(a._endY-a[Ot]);for(p=0;p<l[f];p+=1){h=l[p];c=t[k][d][h];if(i[d]&&c)for(u=0;u<c[f];u+=1)if(c[u]!==i){c[u].x=i[nt]-(c[u]._endX-c[u][Lt]);c[u].y=i[rt]-(c[u]._endY-c[u][Ot]);c[u][on]&&i[q]&&c[u][on][C](e[0],c[u])}}er(e,i,on)}else if(n===st||n===St){if(a[Mt]){er(e,i,Ut);a[Mt]=o}for(p=0;p<l[f];p+=1){h=l[p];c=t[k][d][h];if(i[d]&&c)for(u=0;u<c[f];u+=1)c[u]!==i&&c[u][Ut]&&i[q]&&c[u][Ut][C](e[0],c[u])}t[on]={}}}function er(e,t,n,r){r||(t[wt]?r=t[wt][n]:r=t[mt]);r&&e.css({cursor:r});t[n]&&t[n][C](e[0],t)}function tr(t,n,r,i){var o,a,l=n,c;n._args=r;n.canvas=t;if(n[xt]||n[dt]){n[k]=s;n[xt]=s}i?n[$]=i:n.method?n[$]=e.fn[n.method]:n.type?n[$]=e.fn[xn[n.type]]:n[$]=function(){};if(n[k]&&!n._layer){o=e(t);a=o[L]();c=Xn(t);l=new On(n);l[k]=s;l._layer=s;Kn(o,c,l);Qn(o,c,l);Vn(o,c,l);Jn(o,c,l);n[S]=l[S];l[_]===u&&(l[_]=a[f]);a[m](l[_],0,l)}return l}function nr(e){var t,n;for(n=0;n<Ln[f];n+=1){t=Ln[n];e[t]=e["_"+t]}}function rr(e,t){var n,r;for(r=0;r<Ln[f];r+=1){n=Ln[r];e["_"+n]=e[n];An[n]=s;t&&delete e[n]}}function ir(e,t,n){var r;for(r in n)n[tn](r)&&vn(n[r])&&(n[r]=n[r][C](e,t,r));return n}function sr(n){var r,s,o=[],u=1;if(n[sn](/^#?\w+$/gi)){n===h&&(n="rgba(0,0,0,0)");s=t.head;r=s[Ct][It];s[Ct][It]=n;n=e.css(s,It);s[Ct][It]=r}if(n[sn](/^rgb/gi)){o=n[sn](/\d+/gi);n[sn](/%/gi)&&(u=2.55);o[0]*=u;o[1]*=u;o[2]*=u;o[3]!==a?o[3]=i(o[3]):o[3]=1}return o}function or(e){var t=3,n;if(dn(e[I])!=="array"){e[I]=sr(e[I]);e.end=sr(e.end)}e.now=[];if(e[I][3]!==1||e.end[3]!==1)t=4;for(n=0;n<t;n+=1){e.now[n]=e[I][n]+(e.end[n]-e[I][n])*e.pos;n<3&&(e.now[n]=mn(e.now[n]))}if(e[I][3]!==1||e.end[3]!==1)e.now="rgba("+e.now.join(",")+")";else{e.now[Z](0,3);e.now="rgb("+e.now.join(",")+")"}e.elem.nodeName?e.elem[Ct][e.prop]=e.now:e.elem[e.prop]=e.now}function ur(t){var n;for(n=0;n<t[f];n+=1)e.fx.step[t[n]]=or}function ar(e){window.ontouchstart!==undefined&&En[e]&&(e=En[e]);return e}function fr(e){Sn[e]&&(e=Sn[e]);return e}function lr(e){Mn[B][e]=function(t,n){var r,i;i=n[Y];r=e===J||e===ut?D:e;if(!n[B][r]){t.bind(r+".jCanvas",function(e){i.x=e[Qt];i.y=e.offsetY;i.type=r;i[Y]=e;t[P]({resetFire:s});e.preventDefault()});n[B][r]=s}}}function cr(e){var t;for(t=0;t<e[f];t+=1)lr(e[t])}function hr(e,t,n){var r,i,s,o,a,f,l,c;r=n._args;if(r[S]){i=Xn(e);s=i[Y];if(s.x!==u&&s.y!==u){f=s.x*i[jt];l=s.y*i[jt];o=t.isPointInPath(f,l)||t[$t]&&t[$t](f,l)}a=i[p];r.eventX=r.mouseX=s.x;r.eventY=r.mouseY=s.y;r[Y]=s[Y];c=i[p][ct];f=r.eventX;l=r.eventY;if(c!==0){r[nt]=f*bn(-c)-l*yn(-c);r[rt]=l*bn(-c)+f*yn(-c)}else{r[nt]=f;r[rt]=l}r[nt]/=a[ht];r[rt]/=a[lt];o&&i[Q].push(r);r[V]=o}}function pr(e,t){isNaN(Number(t[N]))||(t[N]+="px");e.font=t[Vt]+" "+t[N]+" "+t[Rt]}function dr(t,n,r,s){var o,u,a;if(Nn.text===r.text&&Nn[Vt]===r[Vt]&&Nn[N]===r[N]&&Nn[Rt]===r[Rt]&&Nn[Bt]===r[Bt]&&Nn[it]===r[it]){r[c]=Nn[c];r[l]=Nn[l]}else{r[c]=n[R](s[0])[c];for(a=1;a<s[f];a+=1){u=n[R](s[a])[c];u>r[c]&&(r[c]=u)}o=t[Ct][N];t[Ct][N]=r[N];r[l]=i(e.css(t,N))*s[f]*r[it];t[Ct][N]=o}}function vr(e,t){var n=t.text,r=t[Bt],i=n.split("\n"),s=[],o,u,a,l,h,p;for(a=0;a<i[f];a+=1){l=i[a];h=l.split(" ");o=[];u="";if(h[f]===1||e[R](l)[c]<r)o=[l];else{for(p=0;p<h[f];p+=1){if(e[R](u+h[p])[c]>r){u!==""&&o.push(u);u=""}u+=h[p];p!==h[f]-1&&(u+=" ")}o.push(u)}s=s.concat(o.join("\n").replace(/( (\n))|( $)/gi,"$2").split("\n"))}return s}var f="length",l="height",c="width",h="transparent",p="transforms",d="groups",v="shadowColor",m="splice",g="beginPath",y="getLayer",b="fillStyle",w="visible",E="translate",S="_event",x="strokeStyle",T="getLayerGroup",N="fontSize",C="call",k="layer",L="getLayers",A="getContext",O="savedTransforms",M="sHeight",_="index",D="mousemove",P="drawLayers",H="_toRad",B="events",j="translateX",F="translateY",I="start",q="fireDragGroupEvents",R="measureText",U="sWidth",z="closePath",W="mousedown",X="name",V="intersects",$="_method",J="mouseover",K="drawImage",Q="intersecting",G="radius",Y="event",Z="slice",et="lineTo",tt="lastIntersected",nt="_eventX",rt="_eventY",it="lineHeight",st="mouseup",ot="animating",ut="mouseout",at="jCanvas",ft="touchstart",lt="scaleY",ct="rotate",ht="scaleX",pt="closed",dt="dragGroups",vt="touchmove",mt="cursor",gt="autosave",yt="setLayer",bt="strokeWidth",wt="cursors",Et="bezierCurveTo",St="touchend",xt="draggable",Tt="_fired",Nt="shadowBlur",Ct="style",kt="restore",Lt="_startX",At="inDegrees",Ot="_startY",Mt="dragging",_t="dragGroupWithLayer",Dt="animated",Pt="_hovered",Ht="dragstart",Bt="maxWidth",jt="pixelRatio",Ft="imageSmoothing",It="color",qt="_animating",Rt="fontFamily",Ut="dragstop",zt="<canvas />",Wt="drawQuadratic",Xt="_masks",Vt="fontStyle",$t="isPointInStroke",Jt="layers",Kt="group",Qt="offsetX",Gt="moveTo",Yt="concavity",Zt="drawPolygon",en="drawEllipse",tn="hasOwnProperty",nn="load",rn="drawVector",sn="match",on="drag",un="complete",an="drawBezier",fn="createPattern",ln="restoreCanvas",cn,hn=e.extend,pn=e.inArray,dn=e.type,vn=e.isFunction,mn=r.round,gn=r.PI,yn=r.sin,bn=r.cos,wn=e[Y].fix,En,Sn,xn,Tn={},Nn={},Cn={},kn={rotate:0,scaleX:1,scaleY:1,translateX:0,translateY:0,masks:[]},Ln,An;e.fn[at]=Mn;Mn[B]={};cn={align:"center",autosave:s,baseline:"middle",bringToFront:o,ccw:o,closed:o,compositing:"source-over",concavity:0,cornerRadius:0,count:1,cropFromCenter:s,cursor:u,cursors:u,disableEvents:o,draggable:o,dragGroups:u,group:u,groups:u,data:{},each:u,end:360,fillStyle:h,fireDragGroupEvents:o,fontStyle:"normal",fontSize:"12pt",fontFamily:"sans-serif",fromCenter:s,fn:u,height:u,imageSmoothing:s,inDegrees:s,index:u,lineHeight:1,layer:o,load:u,mask:o,maxWidth:u,miterLimit:10,name:u,opacity:1,r1:u,r2:u,radius:0,repeat:"repeat",respectAlign:o,rotate:0,rounded:o,scale:1,scaleX:1,scaleY:1,shadowBlur:0,shadowColor:h,shadowStroke:!1,shadowX:0,shadowY:0,sHeight:u,sides:0,source:"",spread:0,start:0,strokeCap:"butt",strokeJoin:"miter",strokeStyle:h,strokeWidth:1,sWidth:u,sx:u,sy:u,text:"",translate:0,translateX:0,translateY:0,type:u,visible:s,width:u,x:0,y:0};Mn();Mn.extend=function(n){Mn.defaults=hn(cn,n.props);Mn();n[X]&&(e.fn[n[X]]=function r(e){var t=this,i,s,o,u,a;for(s=0;s<t[f];s+=1){i=t[s];o=Dn(i);if(o){u=new On(e);a=tr(i,u,e,r);jn(i,o,u);n.fn[C](i,o,u)}}return t});return e.fn[n[X]]};e.fn[L]=function(t){var n=this[0],r,i,s,o=[];if(n&&n[A]){r=Xn(n);i=r[Jt];if(vn(t))for(s=0;s<i[f];s+=1)t[C](n,i[s])&&o.push(i[s]);else o=i}return o};e.fn[y]=function(t){var n=this[0],r=Xn(n),i=r[Jt],s=dn(t),o,u;if(t&&t[k])o=t;else if(s==="number"){t<0&&(t=i[f]+t);o=i[t]}else if(s==="regexp"){for(u=0;u<i[f];u+=1)if(_n(i[u][X])&&i[u][X][sn](t)){o=i[u];break}}else o=r[k].names[t];return o};e.fn[T]=function(t){var n=dn(t),r,i,s,o;if(n==="array")return t;if(n==="regexp"){o=Xn(this[0]);r=o[d];for(i in r)if(i[sn](t)){s=r[i];break}}else{o=Xn(this[0]);s=o[k][d][t]}return s};e.fn.getLayerIndex=function(t){var n=this,r=n[L](),i=n[y](t);return pn(i,r)};e.fn[yt]=function(n,r){var i=this,s,o,u,l;for(o=0;o<i[f];o+=1){s=e(i[o]);u=Xn(i[o]);l=e(i[o])[y](n);if(l){Kn(s,u,l,r);Qn(s,u,l,r);r[_]!==a&&s.moveLayer(l,r[_]);hn(l,r);Vn(s,u,l);Jn(s,u,l)}}return i};e.fn.setLayerGroup=function(n,r){var i=this,s,o,u,a;for(o=0;o<i[f];o+=1){s=e(i[o]);u=s[T](n);if(u)for(a=0;a<u[f];a+=1)s[yt](u[a],r)}return i};e.fn.setLayers=function(n){var r=this,i,s,o,u;for(s=0;s<r[f];s+=1){i=e(r[s]);o=i[L]();for(u=0;u<o[f];u+=1)i[yt](o[u],n)}return r};e.fn.moveLayer=function(n,r){var i=this,s,o,u,a;for(o=0;o<i[f];o+=1){s=e(i[o]);u=s[L]();a=s[y](n);if(a){a[_]=pn(a,u);u[m](a[_],1);u[m](r,0,a);r<0&&(r=u[f]+r);a[_]=r}}return i};e.fn.removeLayer=function(n){var r=this,i,s,o,a,l;for(s=0;s<r[f];s+=1){i=e(r[s]);o=Xn(r[s]);a=i[L]();l=i[y](n);if(l){l[_]=pn(l,a);a[m](l[_],1);Kn(i,o,l,{name:u});Qn(i,o,l,{groups:u})}}return r};e.fn.removeLayerGroup=function(n){var r=this,i,s,o,l,c,h,p;if(n!==a)for(s=0;s<r[f];s+=1){i=e(r[s]);o=Xn(r[s]);l=i[L]();c=i[T](n);if(c){for(p=0;p<c[f];p+=1){h=c[p];h[_]=pn(h,l);l[m](h[_],1);Kn(i,o,h,{name:u})}delete o[k][d][c[X]]}}return r};e.fn.removeLayers=function(){var n=this,r,i,s;for(i=0;i<n[f];i+=1){r=e(n[i]);s=Xn(n[i]);s[Jt][f]=0;s[k].names={};s[k][d]={}}return n};e.fn.addLayerToGroup=function(n,r){var i=this,s,o,u,a=[];for(o=0;o<i[f];o+=1){s=e(i[o]);u=s[y](n);if(u[d]&&pn(r,u[d])===-1){a=u[d][Z](0);a.push(r);s[yt](u,{groups:a})}}return i};e.fn.removeLayerFromGroup=function(n,r){var i=this,s,o,u,a=[],l;for(o=0;o<i[f];o+=1){s=e(i[o]);u=s[y](n);l=pn(r,u[d]);if(l!==-1){a=u[d][Z](0);a[m](l,1);s[yt](u,{groups:a})}}return i};e.fn.drawLayer=function(n){var r=this,i,s,o,u;for(i=0;i<r[f];i+=1){o=e(r[i]);s=Dn(r[i]);u=o[y](n);Yn(o,s,u)}return r};e.fn[P]=function(n){var r=this,i,a,l,c=hn({},n),h,d,v,m,g,y,b,E,x;c[_]||(c[_]=0);for(a=0;a<r[f];a+=1){i=e(r[a]);l=Dn(r[a]);if(l){y=Xn(r[a]);c.clear!==o&&i.clearCanvas();h=y[Jt];for(m=c[_];m<h[f];m+=1){d=h[m];d[_]=m;c.resetFire&&(d[Tt]=o);d[S]=!d.disableEvents;Yn(i,l,d,m+1);d[Xt]=y[p].masks[Z](0);if(d[$]===e.fn[K]&&d[w])break}g=m;d=Gn(y);b=y[Y];E=b.type;d[E]||(E=fr(E));x=y[on];v=y[tt];if(v!==u&&d!==v&&v[Pt]&&!v[Tt]){y[tt]=u;v[Tt]=s;v[Pt]=o;er(i,v,ut,y[mt])}if(d[S]&&d[V]){y[tt]=d;if(d[J]||d[ut]||d[mt]||d[wt])if(!d[Pt]&&!d[Tt]){d[Tt]=s;d[Pt]=s;er(i,d,J)}if(!d[Tt]){d[Tt]=s;b.type=u;er(i,d,E)}d[xt]&&(E===W||E===ft)&&(x[k]=d)}x[k]&&Zn(i,y,E);if(g===h[f]){y[Q][f]=0;y[p]=Pn(kn);y[O][f]=0}}}return r};e.fn.addLayer=function(t){var n=this,r,i,o;for(r=0;r<n[f];r+=1){i=Dn(n[r]);if(i){o=new On(t);o[k]=s;tr(n[r],o,t)}}return n};Ln=[c,l,"opacity",it];An={};e.fn.animateLayer=function(){function v(e,t,n){return function(){nr(n);(!t[ot]||t[Dt]===n)&&e[P]();c[4]&&c[4][C](e[0],n);n[qt]=o;t[ot]=o;t[Dt]=u}}function g(e,t,n){return function(r,i){if(n._pos!==i.pos){n._pos=i.pos;nr(n);if(!n[qt]&&!t[ot]){n[qt]=s;t[ot]=s;t[Dt]=n}(!t[ot]||t[Dt]===n)&&e[P]();c[5]&&c[5][C](e[0],r,i,n)}}}var n=this,r,i,l,c=[][Z][C](arguments,0),h,p,d;if(dn(c[2])==="object"){c[m](2,0,c[2].duration||u);c[m](3,0,c[3].easing||u);c[m](4,0,c[4].done||c[4][un]||u);c[m](5,0,c[5].step||u)}else{if(c[2]===a){c[m](2,0,u);c[m](3,0,u);c[m](4,0,u)}else if(vn(c[2])){c[m](2,0,u);c[m](3,0,u)}if(c[3]===a){c[3]=u;c[m](4,0,u)}else vn(c[3])&&c[m](3,0,u)}for(i=0;i<n[f];i+=1){r=e(n[i]);l=Dn(n[i]);if(l){h=Xn(n[i]);p=r[y](c[0]);if(p&&p[$]!==e.fn.draw){d=hn({},c[1]);d=ir(n[i],p,d);rr(d,s);rr(p);p[Ct]=An;e(p).animate(d,{duration:c[2],easing:e.easing[c[3]]?c[3]:u,complete:v(r,h,p),step:g(r,h,p)})}}}return n};e.fn.animateLayerGroup=function(n){var r=this,i,s,o=[][Z][C](arguments,0),u,a;for(s=0;s<r[f];s+=1){i=e(r[s]);u=i[T](n);if(u)for(a=0;a<u[f];a+=1)i.animateLayer.apply(i,[u[a]].concat(o[Z](1)))}return r};e.fn.delayLayer=function(n,r){var i=this,s,o;r=r||0;for(s=0;s<i[f];s+=1){o=e(i[s])[y](n);e(o).delay(r)}return i};e.fn.delayLayerGroup=function(n,r){var i=this,s,o,u,a,l;r=r||0;for(o=0;o<i[f];o+=1){s=e(i[o]);u=s[T](n);if(u)for(l=0;l<u[f];l+=1){a=u[l];a&&e(a).delay(r)}}return i};e.fn.stopLayer=function(n,r){var i=this,s,o,u;for(o=0;o<i[f];o+=1){s=e(i[o]);u=s[y](n);u&&e(u).stop(r)}return i};e.fn.stopLayerGroup=function(n,r){var i=this,s,o,u,a,l;for(o=0;o<i[f];o+=1){s=e(i[o]);u=s[T](n);if(u)for(l=0;l<u[f];l+=1){a=u[l];a&&e(a).stop(r)}}return i};ur([It,"backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor",b,"outlineColor",x,v]);En={mousedown:ft,mouseup:St,mousemove:vt};Sn={touchstart:W,touchend:st,touchmove:D};cr(["click","dblclick",W,st,D,J,ut,ft,vt,St]);e[Y].fix=function(t){var n,r,i;t=wn[C](e[Y],t);r=t.originalEvent;if(r){i=r.changedTouches;if(t.pageX!==a&&t[Qt]===a){n=e(t.target).offset();if(n){t[Qt]=t.pageX-n.left;t.offsetY=t.pageY-n.top}}else if(i){n=e(r.target).offset();if(n){t[Qt]=i[0].pageX-n.left;t.offsetY=i[0].pageY-n.top}}}return t};xn={arc:"drawArc",bezier:an,ellipse:en,"function":"draw",image:K,line:"drawLine",polygon:Zt,slice:"drawSlice",quadratic:Wt,rectangle:"drawRect",text:"drawText",vector:rn};e.fn.draw=function mr(t){var n=this,r,i,s,o=new On(t),u;if(xn[o.type])n[xn[o.type]](o);else for(i=0;i<n[f];i+=1){r=e(n[i]);s=Dn(n[i]);if(s){o=new On(t);u=tr(n[i],o,t,mr);o[w]&&o.fn&&o.fn[C](n[i],s,o)}}return n};e.fn.clearCanvas=function gr(e){var t=this,n,r,i=new On(e),s;for(n=0;n<t[f];n+=1){r=Dn(t[n]);if(r)if(i[c]===u||i[l]===u){r.save();r.setTransform(1,0,0,1,0,0);r.clearRect(0,0,t[n][c],t[n][l]);r[kt]()}else{s=tr(t[n],i,e,gr);Wn(t[n],r,i,i[c],i[l]);r.clearRect(i.x-i[c]/2,i.y-i[l]/2,i[c],i[l]);In(r,i)}}return t};e.fn.saveCanvas=function yr(e){var t=this,n,r,i,s,o,u;for(n=0;n<t[f];n+=1){r=Dn(t[n]);if(r){o=Xn(t[n]);i=new On(e);s=tr(t[n],i,e,yr);for(u=0;u<i.count;u+=1)Hn(r,o)}}return t};e.fn[ln]=function br(e){var t=this,n,r,i,s,o,u;for(n=0;n<t[f];n+=1){r=Dn(t[n]);if(r){o=Xn(t[n]);i=new On(e);s=tr(t[n],i,e,br);for(u=0;u<i.count;u+=1)Bn(r,o)}}return t};e.fn.restoreCanvasOnRedraw=function(t){var n=this,r=hn({},t);r[k]=s;n[ln](r);return n};e.fn.rotateCanvas=function wr(e){var t=this,n,r,i,s,o;for(n=0;n<t[f];n+=1){r=Dn(t[n]);if(r){o=Xn(t[n]);i=new On(e);s=tr(t[n],i,e,wr);i[gt]&&Hn(r,o);Rn(r,i,o[p])}}return t};e.fn.scaleCanvas=function Er(e){var t=this,n,r,i,s,o;for(n=0;n<t[f];n+=1){r=Dn(t[n]);if(r){o=Xn(t[n]);i=new On(e);s=tr(t[n],i,e,Er);i[gt]&&Hn(r,o);Un(r,i,o[p])}}return t};e.fn.translateCanvas=function Sr(e){var t=this,n,r,i,s,o;for(n=0;n<t[f];n+=1){r=Dn(t[n]);if(r){o=Xn(t[n]);i=new On(e);s=tr(t[n],i,e,Sr);i[gt]&&Hn(r,o);zn(r,i,o[p])}}return t};e.fn.drawRect=function xr(e){var t=this,n,r,i,u,a,h,p,d,v;for(n=0;n<t[f];n+=1){r=Dn(t[n]);if(r){i=new On(e);u=tr(t[n],i,e,xr);if(i[w]){jn(t[n],r,i);Wn(t[n],r,i,i[c],i[l]);r[g]();a=i.x-i[c]/2;h=i.y-i[l]/2;v=i.cornerRadius;if(v){i[pt]=s;p=i.x+i[c]/2;d=i.y+i[l]/2;p-a-2*v<0&&(v=(p-a)/2);d-h-2*v<0&&(v=(d-h)/2);r[Gt](a+v,h);r[et](p-v,h);r.arc(p-v,h+v,v,3*gn/2,gn*2,o);r[et](p,d-v);r.arc(p-v,d-v,v,0,gn/2,o);r[et](a+v,d);r.arc(a+v,d-v,v,gn/2,gn,o);r[et](a,h+v);r.arc(a+v,h+v,v,gn,3*gn/2,o)}else r.rect(a,h,i[c],i[l]);i[S]&&hr(t[n],r,i);qn(t[n],r,i)}}}return t};e.fn.drawArc=function Tr(e){var t=this,n,r,i,s;for(n=0;n<t[f];n+=1){r=Dn(t[n]);if(r){i=new On(e);s=tr(t[n],i,e,Tr);if(i[w]){jn(t[n],r,i);Wn(t[n],r,i,i[G]*2);!i[At]&&i.end===360&&(i.end=gn*2);i[I]*=i[H];i.end*=i[H];i[I]-=gn/2;i.end-=gn/2;r[g]();r.arc(i.x,i.y,i[G],i[I],i.end,i.ccw);i[S]&&hr(t[n],r,i);qn(t[n],r,i)}}}return t};e.fn[en]=function Nr(e){var t=this,n,r,i,o,u,a;for(n=0;n<t[f];n+=1){r=Dn(t[n]);if(r){i=new On(e);o=tr(t[n],i,e,Nr);if(i[w]){jn(t[n],r,i);Wn(t[n],r,i,i[c],i[l]);u=i[c]*(4/3);a=i[l];r[g]();r[Gt](i.x,i.y-a/2);r[Et](i.x-u/2,i.y-a/2,i.x-u/2,i.y+a/2,i.x,i.y+a/2);r[Et](i.x+u/2,i.y+a/2,i.x+u/2,i.y-a/2,i.x,i.y-a/2);i[S]&&hr(t[n],r,i);i[pt]=s;qn(t[n],r,i)}}}return t};e.fn[Zt]=function Cr(e){var t=this,n,r,i,o,u,a,l,c,h,p,d;for(n=0;n<t[f];n+=1){r=Dn(t[n]);if(r){i=new On(e);o=tr(t[n],i,e,Cr);if(i[w]){jn(t[n],r,i);Wn(t[n],r,i,i[G]*2);a=2*gn/i.sides;l=a/2;u=l+gn/2;c=i[G]*bn(l);r[g]();for(d=0;d<i.sides;d+=1){h=i.x+i[G]*bn(u);p=i.y+i[G]*yn(u);r[et](h,p);if(i[Yt]){h=i.x+(c+ -c*i[Yt])*bn(u+l);p=i.y+(c+ -c*i[Yt])*yn(u+l);r[et](h,p)}u+=a}i[S]&&hr(t[n],r,i);i[pt]=s;qn(t[n],r,i)}}}return t};e.fn.drawSlice=function kr(t){var n=this,r,i,o,u,a,l,c,h;for(i=0;i<n[f];i+=1){r=e(n[i]);o=Dn(n[i]);if(o){u=new On(t);a=tr(n[i],u,t,kr);if(u[w]){jn(n[i],o,u);Wn(n[i],o,u,u[G]*2);u[I]*=u[H];u.end*=u[H];u[I]-=gn/2;u.end-=gn/2;while(u[I]<0)u[I]+=2*gn;while(u.end<0)u.end+=2*gn;u.end<u[I]&&(u.end+=2*gn);l=(u[I]+u.end)/2;c=u[G]*u.spread*bn(l);h=u[G]*u.spread*yn(l);u.x+=c;u.y+=h;o[g]();o.arc(u.x,u.y,u[G],u[I],u.end,u.ccw);o[et](u.x,u.y);u[S]&&hr(n[i],o,u);u[pt]=s;qn(n[i],o,u)}}}return n};e.fn.drawLine=function Lr(e){var t=this,n,r,i,o,u,l,c;for(n=0;n<t[f];n+=1){r=Dn(t[n]);if(r){i=new On(e);o=tr(t[n],i,e,Lr);if(i[w]){jn(t[n],r,i);Wn(t[n],r,i,0);u=1;r[g]();while(s){l=i["x"+u];c=i["y"+u];if(l===a||c===a)break;r[et](l+i.x,c+i.y);u+=1}i[S]&&hr(t[n],r,i);qn(t[n],r,i)}}}return t};e.fn[Wt]=function Ar(e){var t=this,n,r,i,o,u,l,c,h,p;for(n=0;n<t[f];n+=1){r=Dn(t[n]);if(r){i=new On(e);o=tr(t[n],i,e,Ar);if(i[w]){jn(t[n],r,i);Wn(t[n],r,i,0);u=2;r[g]();r[Gt](i.x1+i.x,i.y1+i.y);while(s){l=i["x"+u];c=i["y"+u];h=i["cx"+(u-1)];p=i["cy"+(u-1)];if(l===a||c===a||h===a||p===a)break;r.quadraticCurveTo(h+i.x,p+i.y,l+i.x,c+i.y);u+=1}i[S]&&hr(t[n],r,i);qn(t[n],r,i)}}}return t};e.fn[an]=function Or(e){var t=this,n,r,i,o,u,l,c,h,p,d,v,m;for(n=0;n<t[f];n+=1){r=Dn(t[n]);if(r){i=new On(e);o=tr(t[n],i,e,Or);if(i[w]){jn(t[n],r,i);Wn(t[n],r,i,0);u=2;l=1;r[g]();r[Gt](i.x1+i.x,i.y1+i.y);while(s){c=i["x"+u];h=i["y"+u];p=i["cx"+l];d=i["cy"+l];v=i["cx"+(l+1)];m=i["cy"+(l+1)];if(c===a||h===a||p===a||d===a||v===a||m===a)break;r[Et](p+i.x,d+i.y,v+i.x,m+i.y,c+i.x,h+i.y);u+=1;l+=2}i[S]&&hr(t[n],r,i);qn(t[n],r,i)}}}return t};e.fn[rn]=function Mr(e){var t=this,n,r,i,o,u,l,c,h,p;for(n=0;n<t[f];n+=1){r=Dn(t[n]);if(r){i=new On(e);o=tr(t[n],i,e,Mr);if(i[w]){jn(t[n],r,i);Wn(t[n],r,i,0);u=1;r[g]();h=i.x;p=i.y;r[Gt](i.x,i.y);while(s){l=i["a"+u];c=i["l"+u];if(l===a||c===a)break;l*=i[H];l-=gn/2;h+=c*bn(l);p+=c*yn(l);r[et](h,p);u+=1}i[S]&&hr(t[n],r,i);qn(t[n],r,i)}}}return t};e.fn.drawText=function _r(t){var n=this,r,i,s,o,a,p,d,m,y;for(i=0;i<n[f];i+=1){r=e(n[i]);s=Dn(n[i]);if(s){o=new On(t);a=tr(n[i],o,t,_r);if(o[w]){jn(n[i],s,o);s.textBaseline=o.baseline;s.textAlign=o.align;pr(s,o);o[Bt]!==u?p=vr(s,o):p=o.text.toString().split("\n");dr(n[i],s,o,p);if(t&&o[k]){t[c]=o[c];t[l]=o[l]}Wn(n[i],s,o,o[c],o[l]);m=o.x;o.align==="left"?o.respectAlign?o.x+=o[c]/2:m-=o[c]/2:o.align==="right"&&(o.respectAlign?o.x-=o[c]/2:m+=o[c]/2);for(d=0;d<p[f];d+=1){s[v]=o[v];y=o.y+d*o[l]/p[f]-(p[f]-1)*o[l]/p[f]/2;s.fillText(p[d],m,y);o[b]!==h&&(s[v]=h);s.strokeText(p[d],m,y)}if(o[S]){s[g]();s.rect(o.x-o[c]/2,o.y-o[l]/2,o[c],o[l]);hr(n[i],s,o);s[z]()}In(s,o)}}}Nn=o;return n};e.fn[R]=function(t){var n=this,r,i,s;t&&t[k]||dn(t)==="string"?i=n[y](t):i=new On(t);if(!i)i={};else{r=Dn(n[0]);if(r){pr(r,i);s=vr(r,i);dr(n[0],r,i,s)}}return i};e.fn[K]=function Dr(t){function T(e,t,n,i,s){jn(r[e],t,i);i[c]===u&&i[U]===u&&(i[c]=i[U]=b[c]);i[l]===u&&i[M]===u&&(i[l]=i[M]=b[l]);if(s){s[c]=i[c];s[l]=i[l]}if(i[U]!==u&&i[M]!==u&&i.sx!==u&&i.sy!==u){i[c]===u&&(i[c]=i[U]);i[l]===u&&(i[l]=i[M]);if(!i.cropFromCenter){i.sx+=i[U]/2;i.sy+=i[M]/2}i.sy-i[M]/2<0&&(i.sy=i[M]/2);i.sy+i[M]/2>b[l]&&(i.sy=b[l]-i[M]/2);i.sx-i[U]/2<0&&(i.sx=i[U]/2);i.sx+i[U]/2>b[c]&&(i.sx=b[c]-i[U]/2);Wn(r[e],t,i,i[c],i[l]);t[K](b,i.sx-i[U]/2,i.sy-i[M]/2,i[U],i[M],i.x-i[c]/2,i.y-i[l]/2,i[c],i[l])}else{Wn(r[e],t,i,i[c],i[l]);t[K](b,i.x-i[c]/2,i.y-i[l]/2,i[c],i[l])}t[g]();t.rect(i.x-i[c]/2,i.y-i[l]/2,i[c],i[l]);i[S]&&hr(r[e],t,i);t[z]();In(t,i);Fn(t,n,i)}function N(t,n,r,i,u,a){return function(){T(n,r,i,u,a);u[nn]&&u[nn][C](t,a);if(u[k]){u._args[Xt]=i[p].masks[Z](0);u._next&&e(t)[P]({clear:o,resetFire:s,index:u._next})}}}var r=this,i,h,d,v,m,y,b,E,x;for(h=0;h<r[f];h+=1){i=r[h];d=Dn(r[h]);if(d){v=Xn(r[h]);m=new On(t);y=tr(r[h],m,t,Dr);if(m[w]){x=m.source;E=x[A];if(x.src||E)b=x;else if(x)if(Cn[x]!==a)b=Cn[x];else{b=new n;b.src=x;Cn[x]=b}if(b)if(b[un]||E)N(i,h,d,v,m,y)();else{e(b).bind(nn,N(i,h,d,v,m,y));b.src=b.src}}}}return r};e.fn[fn]=function(r){function d(){h=s[fn](a,o.repeat);o[nn]&&o[nn][C](i[0],h)}var i=this,s,o,a,f,h,p;s=Dn(i[0]);if(s){o=new On(r);p=o.source;if(vn(p)){a=e(zt)[0];a[c]=o[c];a[l]=o[l];f=Dn(a);p[C](a,f);d()}else{f=p[A];if(p.src||f)a=p;else{a=new n;a.src=p}if(a[un]||f)d();else{e(a).bind(nn,d);a.src=a.src}}}else h=u;return h};e.fn.createGradient=function(t){var n=this,r,i,s,o=[],l,c,h,p,d,v,m;i=new On(t);r=Dn(n[0]);if(r){i.x1=i.x1||0;i.y1=i.y1||0;i.x2=i.x2||0;i.y2=i.y2||0;i.r1!==u||i.r2!==u?s=r.createRadialGradient(i.x1,i.y1,i.r1,i.x2,i.y2,i.r2):s=r.createLinearGradient(i.x1,i.y1,i.x2,i.y2);for(p=1;i["c"+p]!==a;p+=1)i["s"+p]!==a?o.push(i["s"+p]):o.push(u);l=o[f];o[0]===u&&(o[0]=0);o[l-1]===u&&(o[l-1]=1);for(p=0;p<l;p+=1){if(o[p]!==u){v=1;m=0;c=o[p];for(d=p+1;d<l;d+=1){if(o[d]!==u){h=o[d];break}v+=1}c>h&&(o[d]=o[p])}else if(o[p]===u){m+=1;o[p]=c+m*((h-c)/v)}s.addColorStop(o[p],i["c"+(p+1)])}}else s=u;return s};e.fn.setPixels=function Pr(e){var t=this,n,r,i,s,o,a,h,p,d,v;for(r=0;r<t[f];r+=1){n=t[r];i=Dn(n);if(i){s=new On(e);o=tr(n,s,e,Pr);Wn(t[r],i,s,s[c],s[l]);if(s[c]===u||s[l]===u){s[c]=n[c];s[l]=n[l];s.x=s[c]/2;s.y=s[l]/2}if(s[c]!==0&&s[l]!==0){h=i.getImageData(s.x-s[c]/2,s.y-s[l]/2,s[c],s[l]);p=h.data;v=p[f];if(s.each)for(d=0;d<v;d+=4){a={r:p[d],g:p[d+1],b:p[d+2],a:p[d+3]};s.each[C](n,a,s);p[d]=a.r;p[d+1]=a.g;p[d+2]=a.b;p[d+3]=a.a}i.putImageData(h,s.x-s[c]/2,s.y-s[l]/2);i[kt]()}}}return t};e.fn.getCanvasImage=function(t,n){var r=this[0];n===a&&(n=1);return r&&r.toDataURL?r.toDataURL("image/"+t,n):u};e.fn.detectPixelRatio=function(n){var r=this,i,o,u,a,h,p,d,v,m,g;for(u=0;u<r[f];u+=1){o=r[u];i=e(r[u]);a=Dn(o);g=Xn(r[u]);if(!g.scaled){h=window.devicePixelRatio||1;p=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;d=h/p;if(d!==1){v=o[c];m=o[l];o[c]=v*d;o[l]=m*d;o[Ct][c]=v+"px";o[Ct][l]=m+"px";a.scale(d,d)}g[jt]=d;g.scaled=s;n&&n[C](o,d)}}return r};e.support.canvas=e(zt)[0][A];Mn.defaults=cn;Mn.transformShape=Wn;Mn.detectEvents=hr;Mn[z]=qn;Mn.getTouchEventName=ar;e[at]=Mn})(jQuery,document,Image,Math,parseFloat,!0,!1,null);